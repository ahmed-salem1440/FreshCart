"use strict";(self.webpackChunkEcommerce=self.webpackChunkEcommerce||[]).push([[522],{8522:(R,c,l)=>{l.r(c),l.d(c,{SettingsModule:()=>F});var d=l(6895),g=l(9427),r=l(433),e=l(1571),u=l(7185),p=l(2891);function m(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"password must start with a capital letter and minimum 5 characters"),e.qZA())}function _(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"currentPassword is required"),e.qZA())}function h(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,m,2,0,"p",13),e.YNc(2,_,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s;e.xp6(1),e.Q6J("ngIf",null==(a=n.changePassword.get("currentPassword"))?null:a.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changePassword.get("currentPassword"))?null:s.getError("required"))}}function f(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"password must start with a capital letter and minimum 5 characters"),e.qZA())}function w(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"password is required"),e.qZA())}function v(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,f,2,0,"p",13),e.YNc(2,w,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s;e.xp6(1),e.Q6J("ngIf",null==(a=n.changePassword.get("password"))?null:a.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changePassword.get("password"))?null:s.getError("required"))}}function x(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"rePassword must start with a capital letter and minimum 5 characters"),e.qZA())}function Z(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Password and re rePassword does not the same"),e.qZA())}function T(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"rePassword is required"),e.qZA())}function I(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,x,2,0,"p",13),e.YNc(2,Z,2,0,"p",13),e.YNc(3,T,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s,i;e.xp6(1),e.Q6J("ngIf",null==(a=n.changePassword.get("rePassword"))?null:a.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changePassword.get("rePassword"))?null:s.getError("raPasswordMatching")),e.xp6(1),e.Q6J("ngIf",null==(i=n.changePassword.get("rePassword"))?null:i.getError("required"))}}function S(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Submit"),e.qZA())}function C(t,o){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",15),e.qZA())}function P(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.handleChangePassword(s.changePassword))}),e.TgZ(2,"h4",4),e._uU(3,"Change Password Form:"),e.qZA(),e._UZ(4,"input",5),e.YNc(5,h,3,2,"div",6),e._UZ(6,"input",7),e.YNc(7,v,3,2,"div",6),e._UZ(8,"input",8),e.YNc(9,I,4,3,"div",6),e.TgZ(10,"button",9),e.YNc(11,S,2,0,"span",10),e.YNc(12,C,2,0,"span",10),e.qZA(),e._UZ(13,"div",11),e.qZA()()}if(2&t){const n=e.oxw();let a,s,i;e.xp6(1),e.Q6J("formGroup",n.changePassword),e.xp6(4),e.Q6J("ngIf",(null==(a=n.changePassword.get("currentPassword"))?null:a.errors)&&(null==(a=n.changePassword.get("currentPassword"))?null:a.touched)),e.xp6(2),e.Q6J("ngIf",(null==(s=n.changePassword.get("password"))?null:s.errors)&&(null==(s=n.changePassword.get("password"))?null:s.touched)),e.xp6(2),e.Q6J("ngIf",(null==(i=n.changePassword.get("rePassword"))?null:i.errors)&&(null==(i=n.changePassword.get("rePassword"))?null:i.touched)),e.xp6(1),e.Q6J("disabled",n.changePassword.invalid),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading)}}function y(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"name Minimum Length is 3"),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"name maximum Length is 10"),e.qZA())}function A(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"name is required"),e.qZA())}function N(t,o){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,y,2,0,"p",13),e.YNc(2,q,2,0,"p",13),e.YNc(3,A,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s,i;e.xp6(1),e.Q6J("ngIf",null==(a=n.changeData.get("name"))?null:a.getError("minlength")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changeData.get("name"))?null:s.getError("maxlength")),e.xp6(1),e.Q6J("ngIf",null==(i=n.changeData.get("name"))?null:i.getError("required"))}}function J(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"Invalid Email"),e.qZA())}function b(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"email is required"),e.qZA())}function E(t,o){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,J,2,0,"p",13),e.YNc(2,b,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s;e.xp6(1),e.Q6J("ngIf",null==(a=n.changeData.get("email"))?null:a.getError("email")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changeData.get("email"))?null:s.getError("required"))}}function Y(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"phone must be an Egyption mobile number"),e.qZA())}function M(t,o){1&t&&(e.TgZ(0,"p",14),e._uU(1,"phone is required"),e.qZA())}function Q(t,o){if(1&t&&(e.TgZ(0,"div",20),e.YNc(1,Y,2,0,"p",13),e.YNc(2,M,2,0,"p",13),e.qZA()),2&t){const n=e.oxw(2);let a,s;e.xp6(1),e.Q6J("ngIf",null==(a=n.changeData.get("phone"))?null:a.getError("pattern")),e.xp6(1),e.Q6J("ngIf",null==(s=n.changeData.get("phone"))?null:s.getError("required"))}}function U(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Submit"),e.qZA())}function L(t,o){1&t&&(e.TgZ(0,"span"),e._UZ(1,"i",15),e.qZA())}function D(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",2)(1,"form",3),e.NdJ("ngSubmit",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.handleChangeData(s.changeData))}),e.TgZ(2,"h4",4),e._uU(3,"Change Information Form:"),e.qZA(),e._UZ(4,"input",16),e.YNc(5,N,4,3,"div",17),e._UZ(6,"input",18),e.YNc(7,E,3,2,"div",17),e._UZ(8,"input",19),e.YNc(9,Q,3,2,"div",17),e.TgZ(10,"button",9),e.YNc(11,U,2,0,"span",10),e.YNc(12,L,2,0,"span",10),e.qZA(),e._UZ(13,"div",11),e.qZA()()}if(2&t){const n=e.oxw();let a,s,i;e.xp6(1),e.Q6J("formGroup",n.changeData),e.xp6(4),e.Q6J("ngIf",(null==(a=n.changeData.get("name"))?null:a.errors)&&(null==(a=n.changeData.get("name"))?null:a.touched)),e.xp6(2),e.Q6J("ngIf",(null==(s=n.changeData.get("email"))?null:s.errors)&&(null==(s=n.changeData.get("email"))?null:s.touched)),e.xp6(2),e.Q6J("ngIf",(null==(i=n.changeData.get("phone"))?null:i.errors)&&(null==(i=n.changeData.get("phone"))?null:i.touched)),e.xp6(1),e.Q6J("disabled",n.changeData.invalid),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("ngIf",n.isLoading)}}const B=[{path:"",component:(()=>{class t{constructor(n,a,s,i){this._ToastrService=n,this._AuthService=a,this._ActivatedRoute=s,this._Router=i,this.action="",this.isLoading=!1,this.message=!1,this.changePassword=new r.cw({currentPassword:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Z][a-z0-9]{5,10}/)]),password:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Z][a-z0-9]{5,10}/)]),rePassword:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Z][a-z0-9]{5,10}/)])},{validators:this.rePasswordMatch}),this.changeData=new r.cw({name:new r.NI(null,[r.kI.required,r.kI.minLength(3),r.kI.maxLength(10)]),email:new r.NI(null,[r.kI.required,r.kI.email]),phone:new r.NI(null,[r.kI.required,r.kI.pattern(/^(002|\+2)?01[125][0-9]{8}$/)])})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe(n=>{"change-password"==n.get("action")||"change-data"==n.get("action")?this.action=n.get("action"):this._Router.navigate(["/notfound"])})}rePasswordMatch(n){let a=n.get("password"),s=n.get("rePassword"),i={raPasswordMatching:"Password and rePassword does not match"};return a.value===s.value?null:(s.setErrors(i),i)}handleChangePassword(n){this.isLoading=!0,this._AuthService.changePassword(n.value).subscribe({next:a=>{this.isLoading=!1,this.message=!0,document.getElementById("changeMessage").classList.remove("bg-danger"),document.getElementById("changeMessage").classList.add("bg-main"),document.getElementById("changeMessage").innerHTML='<p class="fw-bold my-2">Password changed successfully</p>',this._ToastrService.success("Password changed successfully","Congratulations!"),setTimeout(()=>{this._AuthService.logOut()},1e3)},error:a=>{this.isLoading=!1,this.message=!0,document.getElementById("changeMessage").classList.add("bg-danger"),document.getElementById("changeMessage").classList.remove("bg-success"),document.getElementById("changeMessage").innerHTML=`<p class="fw-bold my-2">${a.error.errors.msg}</p>`}}),console.log(n.value)}handleChangeData(n){this.isLoading=!0,this._AuthService.changeData(n.value).subscribe({next:a=>{this.isLoading=!1,this.message=!0,document.getElementById("changeMessage").classList.remove("bg-danger"),document.getElementById("changeMessage").classList.add("bg-main"),document.getElementById("changeMessage").innerHTML='<p class="fw-bold my-2">Your Information changed successfully</p>',this._ToastrService.success("Your Information changed successfully","Congratulations!")},error:a=>{this.isLoading=!1,this.message=!0,document.getElementById("changeMessage").classList.remove("bg-success"),document.getElementById("changeMessage").innerHTML=`<p class="fw-bold my-2">${a.error.errors.msg}</p>`,document.getElementById("changeMessage").classList.add("bg-danger")}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u._W),e.Y36(p.e),e.Y36(g.gz),e.Y36(g.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-settings"]],decls:3,vars:2,consts:[[1,"containet"],["class","m-auto",4,"ngIf"],[1,"m-auto"],[1,"text-center",3,"formGroup","ngSubmit"],[1,"text-main","fw-bold","my-3"],["type","password","formControlName","currentPassword","placeholder","Current password",1,"form-control","my-3","w-50","m-auto"],["class","alert text-white w-50 m-auto p-2 bg-danger",4,"ngIf"],["type","password","formControlName","password","placeholder","New password",1,"form-control","my-3","w-50","m-auto"],["type","password","formControlName","rePassword","placeholder","Re-type the new password",1,"form-control","my-3","w-50","m-auto"],["type","submit",1,"btn","bg-main","text-white",3,"disabled"],[4,"ngIf"],["id","changeMessage",1,"alert","text-white","p-0","w-50","my-3","m-auto","d-flex","align-items-center","justify-content-center"],[1,"alert","text-white","w-50","m-auto","p-2","bg-danger"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fa-solid","fa-spinner","fa-spin"],["type","text","formControlName","name","placeholder","name",1,"form-control","my-3","w-50","m-auto"],["class","alert p-2 bg-danger w-50 m-auto",4,"ngIf"],["type","email","formControlName","email","placeholder","New email",1,"form-control","my-3","w-50","m-auto"],["type","tel","formControlName","phone","placeholder","Phone",1,"form-control","my-3","w-50","m-auto"],[1,"alert","p-2","bg-danger","w-50","m-auto"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0),e.YNc(1,P,14,7,"div",1),e.YNc(2,D,14,7,"div",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf","change-password"==a.action),e.xp6(1),e.Q6J("ngIf","change-data"==a.action))},dependencies:[d.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(B),g.Bz]}),t})(),F=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,k,r.UX]}),t})()}}]);